<html>
    <head>
        <title>
            这是一个注册表单
        </title>
        <script >
function n1()
{
    var pattern=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,10}$/
    //下面这个是返回一个集合
    var spans=document.querySelectorAll("span");
    var user=document.getElementById("username");
    if(pattern.test(user.value))
    {
        spans[0].className="success"
        spans[0].innerHTML="正确，进行下一步"
    }
    else
    {
        spans[0].className="error"
        spans[0].innerHTML="用户名不能为空或格式错误！"
    }
}

function n2()
{
    var spans=document.querySelectorAll("span")
    var age=document.getElementById("agename")
    if(age.value>17)
    {
        spans[1].className="success"
        spans[1].innerHTML="正确"
    }
    else
    {
        spans[1].className="error"
        spans[1].innerHTML="年龄不能小于17岁！"
    }
}
function n3()
{
    var pattern=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,10}$/
    var spans=document.querySelectorAll("span")
    var mima=document.getElementById("mima")
    if(pattern.test(mima.value))
    {
        spans[2].className="success"
        spans[2].innerHTML="正确，请进行下一步"
    }
    else
    {
        spans[2].className="error"
        spans[2].innerHTML="密码不能为空或格式错误！"
    }
}

function n4()
{
    var spans=document.querySelectorAll("span");
    var mima=document.getElementById("mima")
    var confirm=document.getElementById("confirm")
    if(mima.value==confirm.value)
    {
        spans[3].className="success"
        spans[3].innerHTML="正确，请进行下一步"
    }
    else
    {
        spans[3].className="error"
        spans[3].innerHTML="两次密码不一致"
    }
}

function n5()
{
    var email=document.getElementById("email")
    var spans=document.querySelectorAll("span")
    var r=/@/
    if(r.test(email.value))
    {
        spans[4].className="success"
        spans[4].innerHTML="正确，请进行下一步"
    }
    else
    {
        spans[4].className="error"
        spans[4].innerHTML="邮箱地址格式错误"
    }
}
function n6()

{
    var pattern=/^\d+$/
    var spans=document.querySelectorAll("span")
    var phone=document.getElementById("phone")
    if(pattern.test(phone.value))

    { 
        spans[5].className="success"
    spans[5].innerHTML="正确，请进行下一步"

    }
    else{
       
        spans[5].className="error"
        spans[5].innerHTML="只能是数字"
    }
}
function n7()
{
    var pattern = /^\d+$/
    var spans=document.querySelectorAll("span")
    var QQ=document.getElementById("QQ")
    if(pattern.test(QQ.value))
    {
        spans[6].className="success"
        spans[6].innerHTML="正确，可以提交了"
    }
    else
    {
        spans[6].className="error"
        spans[6].innerHTML="输入格式可能错误，请重新输入！"
    }
}
function check()
{
    var spans=document.querySelectorAll("span")
   var num=7;
   var f=1;
   for(var i=0;i<num;i++)
   {
    if(spans[i].className=="error")
    {
        f=0;
        alert( spans[i].innerHTML);
        break;
    }
      
   }
    if(f==1)
    {
    alert("注册成功让我们开始吧！！！");
    gogo();
    set();
    }
}
function set()
{
    var a=document.getElementById("username");
    localStorage.setItem("username",a.value);
    a=document.getElementById("agename");
    localStorage.setItem("age",a.value);
    a=document.getElementById("mima");
    localStorage.setItem("passwod",a.value);
    a=document.getElementById("email");
    localStorage.setItem("eamil",a.value);
    a=document.getElementById("phone");
    localStorage.setItem("phone",a.value);
    a=document.getElementById("QQ");
    localStorage.setItem("QQ",a.value);
    var time=5;
    localStorage.setItem("time",time);
    var remember=0;
    localStorage.setItem("remember",remember);
}
function gogo() {
            var loginForm = document.getElementById('go');
            loginForm.style.display = (loginForm.style.display === 'none' || loginForm.style.display === '') ? 'block' : 'none';
            var remember = document.getElementById('remember');
        }
function reset()
{
    $('#username').value('');
    $('#agename').value('');
    $('#confirm').value('');
    $('#mima').value('');
    $('#email').value('');
    $('#phone').value('');
    $('#QQ').value('');
}
const bcrypt = require('bcrypt');
const saltRounds = 10; // 设置盐值的强度

// 注册新用户时创建哈希密码
function registerUser(username, password) {
    bcrypt.hash(password, saltRounds, function(err, hash) {
        if (err) {
            console.error('Error hashing password:', err);
        } else {
            // 将哈希密码存储在数据库中，同时存储盐值
            // 注意：在实际应用中，这里需要将哈希密码和盐值存储到数据库
            console.log('Username:', username);
            console.log('Hashed Password:', hash);
        }
    });
}

// 用户登录时验证密码
function verifyUser(username, password, storedHashedPassword) {
    bcrypt.compare(password, storedHashedPassword, function(err, result) {
        if (err) {
            console.error('Error comparing passwords:', err);
        } else if (result) {
            console.log('登录成功');
        } else {
            console.log('密码错误');
        }
    });
}



        </script>
        <style>
            body{
                background-image: url(back.png);
                background-size: 100% 100% ;
                background-attachment: fixed;
            }
            .success{
                color: green;
            }
            .error{
                color: red;
            }
           
        #myform button {
            background-color: #4c84af;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        h2{
      font-family: 华文琥珀;
      color: darksalmon;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
      letter-spacing: 3px;
      font-size: 4em;
      font-weight: lighter;
    }
        </style>
    </head>
    <body>
        <h2 align="center" color="#F0F8FF">
            <font > 用户注册信息</font>
           
        </h2>
        <br>
        <hr style color="red">
        <br>
        <br>
        <!--下面是一个表单，用一个函数来最后确认是否信息都正确-->
        <font color="#F0F8FF">
        <form id="myform" align="center"   ></br></br>
            用户名*：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" id="username" onblur="n1()" />&nbsp;&nbsp;<span></span></br></br>
            年龄*：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="number" id="agename" onblur="n2()"/>&nbsp;&nbsp;<span></span></br></br>
            密码*：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=password id="mima" onblur="n3()"/>&nbsp;&nbsp;<span></span></br></br>
            确认密码*：&nbsp;<input type=password id="confirm" onblur="n4()"/>&nbsp;&nbsp;<span></span></br></br>
            电子邮件*：&nbsp;<input type="text" id="email" onblur="n5()"/>&nbsp;&nbsp;<span></span></br></br>
            电话：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="number" id="phone" onblur="n6()">&nbsp;&nbsp;<span></span></br></br>
            QQ号码：&nbsp;<input type="text" id="QQ" onblur="n7()">&nbsp;&nbsp;<span></span></br></br>
            <div id="go" style="display: none;">
            <a href='登陆前.html'>

                <button type="button">现在让我们开始吧</button></br>/<br>
                </a>
                </div>

            <button type="button"  onclick="check()"> 提交</button>
            <button type="button" onclick="reset()">重置</button>
        </form>
    </font>
    <footer>
        &copy; 2023 产品论坛
    </footer>
    </body>
        
</html>
